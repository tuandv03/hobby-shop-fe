<div class="container mx-auto p-6" *ngIf="cardDetail && !isLoading && !error">
  <!-- Card Header -->
  <div class="bg-white rounded-lg shadow-lg overflow-hidden">
    <div class="md:flex">
      <!-- Card Image -->
      <div class="md:w-1/3">
        <img 
          [src]="cardDetail.images?.[0]?.image_url || '/assets/card-placeholder.jpg'" 
          [alt]="cardDetail.name"
          class="w-full h-auto object-cover"
        >
      </div>
      
      <!-- Card Basic Info -->
      <div class="md:w-2/3 p-6">
        <h1 class="text-3xl font-bold text-gray-900 mb-2">{{ cardDetail.name }}</h1>
        <div class="grid grid-cols-2 gap-4 mb-4">
          <div>
            <span class="text-sm font-medium text-gray-500">Type:</span>
            <p class="text-lg text-gray-900">{{ cardDetail.type }}</p>
          </div>
          <div *ngIf="cardDetail.race">
            <span class="text-sm font-medium text-gray-500">Race:</span>
            <p class="text-lg text-gray-900">{{ cardDetail.race }}</p>
          </div>
          <div *ngIf="cardDetail.attribute">
            <span class="text-sm font-medium text-gray-500">Attribute:</span>
            <p class="text-lg text-gray-900">{{ cardDetail.attribute }}</p>
          </div>
          <div *ngIf="cardDetail.level">
            <span class="text-sm font-medium text-gray-500">Level:</span>
            <p class="text-lg text-gray-900">{{ cardDetail.level }}</p>
          </div>
          <div *ngIf="cardDetail.atk !== undefined">
            <span class="text-sm font-medium text-gray-500">ATK:</span>
            <p class="text-lg text-gray-900">{{ cardDetail.atk }}</p>
          </div>
          <div *ngIf="cardDetail.def !== undefined">
            <span class="text-sm font-medium text-gray-500">DEF:</span>
            <p class="text-lg text-gray-900">{{ cardDetail.def }}</p>
          </div>
          <div *ngIf="cardDetail.archetype">
            <span class="text-sm font-medium text-gray-500">Archetype:</span>
            <p class="text-lg text-gray-900">{{ cardDetail.archetype }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Card Description -->
  <div class="bg-white rounded-lg shadow-lg mt-6 p-6">
    <h2 class="text-2xl font-bold text-gray-900 mb-4">Description</h2>
    <p class="text-gray-700 leading-relaxed">{{ cardDetail.description }}</p>
  </div>

  <!-- Card Sets -->
  <div class="bg-white rounded-lg shadow-lg mt-6 p-6" *ngIf="cardDetail.sets && cardDetail.sets.length > 0">
    <h2 class="text-2xl font-bold text-gray-900 mb-4">Available Sets</h2>
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Set Name</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Set Code</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Rarity</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Price</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <tr *ngFor="let set of cardDetail.sets">
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ set.set_name }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ set.set_code }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ set.set_rarity }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ set.set_price }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Card Prices -->
  <div class="bg-white rounded-lg shadow-lg mt-6 p-6" *ngIf="cardDetail.prices && cardDetail.prices.length > 0">
    <h2 class="text-2xl font-bold text-gray-900 mb-4">Market Prices</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      <div class="bg-gray-50 rounded-lg p-4" *ngIf="cardDetail.prices[0]?.cardmarket_price">
        <h3 class="font-semibold text-gray-900">Cardmarket</h3>
        <p class="text-xl font-bold text-blue-600">{{ cardDetail.prices[0].cardmarket_price }}</p>
      </div>
      <div class="bg-gray-50 rounded-lg p-4" *ngIf="cardDetail.prices[0]?.tcgplayer_price">
        <h3 class="font-semibold text-gray-900">TCGPlayer</h3>
        <p class="text-xl font-bold text-green-600">{{ cardDetail.prices[0].tcgplayer_price }}</p>
      </div>
      <div class="bg-gray-50 rounded-lg p-4" *ngIf="cardDetail.prices[0]?.ebay_price">
        <h3 class="font-semibold text-gray-900">eBay</h3>
        <p class="text-xl font-bold text-yellow-600">{{ cardDetail.prices[0].ebay_price }}</p>
      </div>
      <div class="bg-gray-50 rounded-lg p-4" *ngIf="cardDetail.prices[0]?.amazon_price">
        <h3 class="font-semibold text-gray-900">Amazon</h3>
        <p class="text-xl font-bold text-orange-600">{{ cardDetail.prices[0].amazon_price }}</p>
      </div>
      <div class="bg-gray-50 rounded-lg p-4" *ngIf="cardDetail.prices[0]?.coolstuffinc_price">
        <h3 class="font-semibold text-gray-900">CoolStuffInc</h3>
        <p class="text-xl font-bold text-purple-600">{{ cardDetail.prices[0].coolstuffinc_price }}</p>
      </div>
    </div>
  </div>

  <!-- Additional Images -->
  <div class="bg-white rounded-lg shadow-lg mt-6 p-6" *ngIf="cardDetail.images && cardDetail.images.length > 1">
    <h2 class="text-2xl font-bold text-gray-900 mb-4">Gallery</h2>
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
      <img 
        *ngFor="let image of cardDetail.images" 
        [src]="image.image_url_small" 
        [alt]="cardDetail.name"
        class="w-full h-auto rounded-lg shadow-md hover:shadow-lg transition-shadow cursor-pointer"
        (click)="openImageModal(image)"
      >
    </div>
  </div>
</div>

<!-- Loading State -->
<div class="container mx-auto p-6" *ngIf="isLoading">
  <div class="bg-white rounded-lg shadow-lg p-8 text-center">
    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
    <p class="text-gray-600">Loading card details...</p>
  </div>
</div>

<!-- Error State -->
<div class="container mx-auto p-6" *ngIf="error && !isLoading">
  <div class="bg-red-50 border border-red-200 rounded-lg p-8 text-center">
    <div class="text-red-500 mb-4">
      <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
    </div>
    <h2 class="text-xl font-semibold text-red-700 mb-2">Error Loading Card</h2>
    <p class="text-red-600">{{ error }}</p>
    <button 
      class="mt-4 bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded"
      (click)="ngOnInit()"
    >
      Try Again
    </button>
  </div>
</div>
